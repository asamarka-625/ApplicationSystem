{% extends "base.html" %}

{% block content %}
<section id="requests" class="content-section">
    <div class="section-header">
        <h1>Заявки</h1>
        <div class="filters">
            <select id="statusFilter">
                <option value="">Все статусы</option>
            </select>
            <select id="typeFilter">
                <option value="">Все типы</option>
            </select>
            <button class="btn btn-secondary" onclick="exportToExcel()">
                <i class="fas fa-file-excel"></i> Экспорт в Excel
            </button>
        </div>
    </div>

    <div class="requests-table-container">
        <table class="requests-table">
            <thead>
                <tr>
                    <th>№ заявки</th>
                    <th>Тип</th>
                    <th>Статус</th>
                    <th>Срочность</th>
                    <th>Дата создания</th>
                    <th>Действия</th>
                </tr>
            </thead>
            <tbody id="requestsTableBody"></tbody>
        </table>
    </div>
</section>
<!-- Модальное окно для отклонения заявки -->
<div id="rejectModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Отклонение заявки</h2>
        <form id="rejectForm">
            <div class="form-group">
                <label for="rejectReason">Причина отклонения:</label>
                <textarea
                    id="rejectReason"
                    name="reason"
                    rows="4"
                    placeholder="Укажите причину отклонения заявки..."
                    required
                ></textarea>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelReject">Отмена</button>
                <button type="submit" class="btn btn-danger" id="confirmReject">Отклонить заявку</button>
            </div>
        </form>
    </div>
</div>
<div id="planningModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Добавление в планирование</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <div class="item-info">
                <p><strong>Предмет:</strong> <span id="modalItemName"></span></p>
                <p><strong>Количество:</strong> <span id="modalItemQuantity"></span> шт.</p>
            </div>
        </div>
        <div class="modal-footer">
            <button id="addToPlanningBtn" class="btn btn-primary">Добавить в планирование</button>
            <button id="cancelPlanningBtn" class="btn btn-secondary">Отмена</button>
        </div>
    </div>
</div>
{% endblock %}